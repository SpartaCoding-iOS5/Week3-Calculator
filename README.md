# 계산기 만들기 과제 (Week 3-4)
***

## 📚 레벨별 구현 내용
### **필수 구현**

| Lv 1 | Lv 2 | Lv 3 | Lv 4 | Lv 5 |
| :-: | :-: | :-: | :-: | :-: |
| ![](image/1.png) | ![](image/2.png) | ![](image/3.png) | ![](image/4.png) | ![](image/5.png) |
| UILabel 생성하기 | UIStackView 사용하기 | UIStackVIew 추가 생성하기 | 버튼 색상 변경 | 버튼 모양 원형으로 만들기 |

### **도전 구현**

- Lv 6
    1. 버튼을 클릭하면 라벨에 표시되도록 변경
    2. 기본 텍스트를 "12345" -> "0" 으로 변경
    3. 기본으로 라벨에 노출되어있던 텍스트 오른쪽에 버튼을 클릭하면 그 버튼의 값이 추가되도록 합니다.
        - EX)
            - 맨처음 기본값 `0` 
            - 그 다음 `1` 클릭했음 → 표시되는 값은 `01` 
            - 그 다음 `2` 클릭했음 → 표시되는 값은 `02` 
            - 그 다음 `+` 클릭했음 → 표시되는 값은 `02+` 
            - 그 다음 `3` 클릭했음 → 표시되는 값은 `02+3` 
        - 하지만 `012` 라는 값은 이상하기 때문에 맨 앞자리가 `0` 인 숫자라면, 0을 지우고 표현
        - EX) `012` → `12` 로 표현
    
- Lv 7
    1. 초기화 버튼 구현
    2. `AC` 버튼을 클릭하면 모든 값을 지우고 "0"으로 초기화
        
- Lv 8
    1. 등호(`=`) 버튼을 클릭하면 연산이 수행되도록 구현
    2. EX)
        - `1+2+3`을 입력 후 `=`을 클릭하면 결과값 `6` 출력
        - `123*456`을 입력 후 `=`을 클릭하면 결과값 `56088` 출력
    ![](image/7.png)

***

## ⏰ 과제 일정
- 시작: 11월 11일 (월)
- 종료: 11월 22일 (금) PM 12:00 까지

***

## 🔥 구현 목표 🔥
- 코드를 최대한 재사용성을 살려 사용하기
- 도전구현까지 모두 완료해보기
- 예외상황에 대한 처리(Error) 진행하기
- 문서 주석을 활용한 앱 설명 구체화하기

***

## ✖️➗ 계산기 기능 ➕➖
### 1. 계산 기능
- 정수와 연산자 기호를 이용하여 계산을 할 수 있다.
- 더하기, 빼기, 곱하기, 나누기의 계산을 할 수 있다.

### 2. 오류 출력 기능
- 잘못된 입력(ex: 1++)을 감지하고 에러를 반환하는 기능

### 3. 초기화 기능
- 입력한 값을 모두 초기화 하는 기능

***

## 🤔 레벨별 고민했던 점
### Lv 1.
레벨 1에서 고민했던 점은 과제의 진행을 코드베이스로 할지, 스토리보드로 할지 정하는 것이었다.
시간이 남는다면 둘 다 진행해보겠지만, 지금 내 실력에서는 어려울 것 같다고 생각했고,
내게 조금 더 잘 맞는 방식이었던 코드베이스 방식을 선택했다.

### Lv 2.
레벨 2에서 고민했던 점은 코드의 재활용성에 대한 문제이다.
스택뷰를 사용하여 버튼을 구성하였는데, 단순히 스택뷰를 인스턴스화 하여 선언하고 내부에 버튼을 구현하면
코드가 너무 길어져서 가독성이 크게 떨어졌다.
때문에 기본적인 값을 가진 스택뷰를 클래스로 정의했고, 클래스 메소드를 통해 스택뷰 내부에 뷰 요소를 쉽게 추가할 수 있도록 하였다. 그러나 여전히 버튼에 대한 오토레이아웃이나 설정 때문에 코드의 가독성이 떨어진다고 생각되었다.
때문에 버튼의 데이터를 담는 배열을 생성하고, 버튼의 값 및 오토레이아웃을 한번에 설정할 수 있는 메소드를 구현하여 사용하였고, 덕분에 코드의 가독성을 높일 수 있었다.

여기서 고민했던 점은 메소드의 매개변수가 너무 많아지는 것은 오히려 코드의 가독성을 헤치지 않을까? 하는 점이었다.
필요한 변수를 매개변수로 지정하다보니 필요한 매개변수의 양이 많아졌고, 때문에 메소드의 선언 길이가 길어졌다. 매개변수의 길이를 줄일 수 있는 방법이 무엇이 있을까 고민해보았지만 클로저 외에는 답이 떠오르지 않았다. 그러나 클로저도 올바른 답인지는 알 수 없었다.

### Lv 3.
레벨 3에서는 `horizontal` 스택뷰와 `vertical` 스택뷰를 이용하여 버튼구성을 구현해야 한다. 처음에는 왜 굳이 `vertical` 스택뷰를 같이 사용할까? 의문이 들었다. 왜냐하면 `horizontal` 스택뷰를 어차피 4개 만들어야 하니 각각의 스택뷰에 오토레이아웃 값을 맞춰주면 되는거 아닌가? 생각했기 때문이다.
그러나 이렇게 하면 코드가 너무 길어지고 지저분해져서 가독성이 떨어진다. 때문에 `vertical` 스택뷰 내에 `horizontal` 스택뷰를 넣고 한번에 관리할 수 있도록 하는 것이다.

레벨 2에서는 버튼의 `.setTitle` 등의 메소드를 통해 버튼을 구현했었는데, 팀원에게 `Configuration`이라는게 있다는 걸 듣게 되었다. 그래서 공부를 해보니 iOS 15 이상부터 사용이 가능해진 방식으로, `UIButton.configuration` 값을 생성하여 여기에 버튼에 대한 값을 지정하고, 버튼에 해당 `Configuration`을 할당하면 버튼의 구현이 완료되는 방식이었다.
`Configuration`으로 버튼을 구현하는 방식이 조금 더 커스텀이 자유로운 느낌이었기 때문에 이번 과제 레벨 3에서 구현에 도전해보았고, `configurationUpdateHandler`를 통해 버튼이 눌렸을 때의 변화까지 구현해보았다.
걱정되는 점은 `Configuration`의 구현방식을 지원하는 것이 **iOS 15 이상** 이라는 점이다. 최신버전이 18.1 버전인만큼 대부분의 사람은 15 이상의 버전을 사용하겠지만, 그렇지 않은 경우 버튼의 구현이 되지 않을 가능성이 있다는 점이 걱정이었다. 추후에는 iOS 버전에 따라 구현방식을 달리하는 방식으로 해결할 수 있으리라고 생각한다.

### Lv 4.
레벨 4에서는 숫자 버튼을 제외한 나머지 버튼의 색을 오렌지색으로 변경하는 것을 구현하였다. 버튼을 2차원 배열로하여 메소드를 통해 구현했기 때문에 어떻게 하면 좋을까 고민을 많이 했던 것 같다. 만약 모든 버튼에 대해 별도로 구현했다면 적용이 쉬웠을텐데, 라고 생각하다가 문득 숫자라는 점이 눈에 띄었다.
숫자 외에 색을 바꾸는 것이라면, 현재 버튼의 타이틀을 `Int`로 형변환이 가능한지 확인하면 되지 않을까? 라는 생각으로 새로운 메소드를 만들었다. 파라미터로 `UIButton`을 받고, 반환값으로 `UIColor`를 반환하게 하여 내부적으로 `if`문을 통해 파라미터로 들어온 버튼의 타이틀을 `Int`로 형변환이 가능한지 확인하고, 가능할 경우 그레이색으로, 불가능할 경우 오렌지색을 반환하도록 구현하였다.
이후, 버튼의 `Configuration`의 설정에서 `baseBackgroundColor`를 새로 만든 메소드로 지정하여 메소드 내에서 알아서 판단하여 색을 적용하도록 하였다.
결과적으로 의도한 대로 숫자 외에는 모두 오렌지색이 적용되어 무사히 레벨4를 마칠 수 있었다.

### Lv 5.
레벨 5에서는 버튼의 모양을 원형으로 바꾸는 작업을 진행하였다. 버튼은 `width: 80, height: 80`의 정사각형 이었기 때문에 버튼의 `cornerRadius`를 40으로 설정했다면 원형으로 만들 수 있었을 것이다.
그러나 나는 버튼의 구현을 `configuration`을 사용하여 구현했기 때문에, 이번에도 `configuration`의 기능을 사용해보기로 했다. `configuration`의 프로퍼티 중 `cornerStyle`이라는 옵션이 있다. 이 속성을 사용하면 버튼의 코너 스타일을 자유롭게 지정할 수 있는데, 이 중 `capsule` 옵션을 선택하면 자동으로 `Radius`값을 최대로 적용해주기 때문에 버튼을 원형으로 만들어줄 수 있었다.

### Lv 6.

### Lv 7.

### Lv 8.
